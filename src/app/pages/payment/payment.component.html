<processing-indicator *ngIf="isLoading"></processing-indicator>
<div class="page">
  <div class="header">
    <span class="spacer"></span>
    <h3>Payment</h3>
    <span class="spacer"></span>
    <button *ngIf="isMobile" (click)="back()" class="backIcon" mat-icon-button color="primary">
      <mat-icon>arrow_back</mat-icon>
    </button>
    <button *ngIf="!isMobile" (click)="back()" class="backButton" mat-raised-button color="primary">
      BACK
    </button>
  </div>
  <div *ngIf="cart && cart.items && cart.items.length" class="container page">
    <div class="row">
      <div class="col-12 col-lg-9">
        <mat-card class="detailsCard">
          <br>
          <h5 class="primaryColor">Card Details</h5>
          <div class="row">
            <div class="col-12">
              <mat-form-field class="full-width-input">
                <mat-label>Card Number</mat-label>
                <input (input)="updated()" matInput type="tel" autocomplete="cc-number" name="cc-number" minlength="16"
                  maxlength="16" [(ngModel)]="number">
                <mat-error *ngIf="!number || number.toString().length < 16">
                  Invalid Card Number
                </mat-error>
              </mat-form-field>
            </div>
            <div class="col-4 col-md-4">
              <mat-form-field class="full-width-input">
                <mat-label>Expiry Month</mat-label>
                <input (input)="updated()" type="tel" minlength="2" maxlength="2" matInput numbersOnly name="month"
                  [(ngModel)]="month" [required]="true">
                <mat-error *ngIf="!month || month.toString().length < 2">
                  Invalid Card Expiry
                </mat-error>
              </mat-form-field>
            </div>
            <div class="col-4 col-md-4">
              <mat-form-field class="full-width-input">
                <mat-label>Expiry Year</mat-label>
                <input (input)="updated()" minlength="2" maxlength="4" type="tel" matInput numbersOnly name="year"
                  [(ngModel)]="year" [required]="true">
                <mat-error *ngIf="!year || year.toString().length < 2">
                  Invalid Card Expiry
                </mat-error>
              </mat-form-field>
            </div>
            <div class="col-4 col-md-4">
              <mat-form-field class="full-width-input">
                <mat-label>CVC</mat-label>
                <input (input)="updated()" type="tel" minlength="3" maxlength="5" matInput numbersOnly name="cvc"
                  [(ngModel)]="cvc" [required]="true">
                <mat-error *ngIf="!cvc || cvc.toString().length < 3">
                  Invalid Card CVC
                </mat-error>
              </mat-form-field>
            </div>
          </div>
          <br>
          <h6 *ngIf="error && (number || cvc || year || month)" class="invalid">* {{error}}</h6>
          <h6 *ngIf="!error && number && cvc && year && month" class="valid">* Card Details Validated</h6>
        </mat-card>
      </div>
      <div class="col-12 col-lg-3">
        <mat-card class="checkoutCard">
          <h5 class="tableHeader cardHeader">Cart Total</h5>
          <div style="margin: 10px;">
            <div class="header">
              <h6>Sub Total : </h6>
              <span class="spacer"></span>
              <h6>${{cart.amount}}</h6>
            </div>
            <div class="header">
              <h6>Delivery : </h6>
              <span class="spacer"></span>
              <h6>FREE</h6>
            </div>
            <div class="header">
              <h6>Total : </h6>
              <span class="spacer"></span>
              <h6>${{cart.amount}}</h6>
            </div>
          </div>
          <mat-card-actions style="padding: 10px;">
            <button (click)="proceed()" mat-raised-button color="accent"><b>Make Payment</b></button>
          </mat-card-actions>
        </mat-card>
      </div>
    </div>
  </div>
</div>