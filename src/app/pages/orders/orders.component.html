<processing-indicator *ngIf="isLoading"></processing-indicator>
<div class="header">
    <span class="spacer"></span>
    <h3>My Orders</h3>
    <span class="spacer"></span>
    <button *ngIf="isMobile" (click)="back()" class="backIcon" mat-icon-button color="primary">
        <mat-icon>cancel</mat-icon>
    </button>
    <button *ngIf="!isMobile" (click)="back()"  class="backButton" mat-raised-button color="primary">
        BACK
    </button>
</div>
<br>
<div *ngIf="page && page.items && page.items.length" class="container page">
    <mat-accordion *ngFor="let order of page.items">
        <mat-expansion-panel class="panel">
            <mat-expansion-panel-header>
                <mat-panel-title class="primaryColor">
                    <img (click)="select(order)" class="cartImage" [src]="order.items[0].item.pic">
                </mat-panel-title>
                <mat-panel-description class="primaryColor">
                    <div class="row primaryColor auto" style="width: 100%;">
                        <div class="col-12 col-md-6 auto">
                            <h6><b>Ordered on {{order.date | date}}</b></h6>
                        </div>
                        <div class="col-12 col-md-6 auto">
                            <h6 *ngIf="order.status != 'pending' || order.transaction.status != 'pending'"><b>Status :
                                </b>{{ order.status | titlecase }}</h6>
                            <button *ngIf="order.status == 'pending' && order.transaction.status == 'pending'"
                                (click)="pay(order)" mat-raised-button color="accent"><b>Pay</b></button>
                        </div>
                        <div class="col-12 col-md-6 auto">
                            <h6><b>Amount : </b>${{ order.amount }}</h6>
                        </div>
                        <div class="col-12 col-md-6 auto">
                            <h6><b>OrderId : </b>{{ order.code }}</h6>
                        </div>
                    </div>
                </mat-panel-description>
            </mat-expansion-panel-header>
            <mat-card *ngFor="let element of order.items" class="checkoutCard">
                <div class="row">
                    <div class="col-4" style="margin-top: auto;margin-bottom: auto;">
                        <img class="cartImage" [src]="element.item.pic">
                    </div>
                    <div class="col-8 col-md-8">
                        <div *ngIf="!isMobile" style="height: 100%;" class="row">
                            <div class="col-12 col-md-6">
                                <h6 style="margin-top: 10%;"><b>Name:</b> {{element.item.name}}</h6>
                                <h6 style="margin-top: 10%;"><b>Price:</b> ${{element.option.price}}</h6>
                            </div>
                            <div class="col-12 col-md-6">
                                <h6 style="margin-top: 10%;"><b>Quantity:</b> {{element.quantity}}</h6>
                                <h6 style="margin-top: 10%;"><b>{{element.option.label}}</b></h6>
                            </div>
                        </div>
                        <div *ngIf="isMobile" style="height: 100%;text-align: left;" class="row">
                            <div class="col-12 col-md-6">
                                <h6><b>Name:</b> {{element.item.name}}</h6>
                                <h6><b>Price:</b> ${{element.option.price}}</h6>
                            </div>
                            <div class="col-12 col-md-6">
                                <h6><b>Quantity:</b> {{element.quantity}}</h6>
                                <h6><b>{{element.option.label}}</b></h6>
                            </div>
                        </div>
                    </div>
                </div>
            </mat-card>
            <mat-card class="checkoutCard">
                <h5>Transaction Details</h5>
                <div class="row">
                    <div class="col-12 col-md-6 auto">
                        <b>Payment : </b>{{ order.transaction.method | uppercase  }}
                    </div>
                    <div class="col-12 col-md-6 auto">
                        <b>Status : </b>{{ order.transaction.status | titlecase  }}
                    </div>
                    <div class="col-12 col-md-6 auto">
                        <b>TransactionId : </b>{{ order.transaction.transactionId }}
                    </div>
                </div>
            </mat-card>
            <mat-card *ngIf="order.tracking" class="checkoutCard">
                <h5>Tracking Details</h5>
                <div class="row">
                    <div class="col-12 col-md-6 auto">
                        <b>Status : </b>{{ order.tracking.status | titlecase  }}
                    </div>
                    <div class="col-12 col-md-6 auto">
                        <b>TrackingId : </b>{{ order.tracking.trackingId }}
                    </div>
                </div>
            </mat-card>
        </mat-expansion-panel>
    </mat-accordion>
</div>
<div *ngIf="page && (!page.items || !page.items.length)" class="empty">
    <h4 class="emptyText">Oops ! You dont have any orders.</h4>
</div>